:root {
  font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.5;
  color-scheme: dark;
  color: #e2e8f0;
  background-color: #0b1120;
  /* Darker Slate */
}

body,
html {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

/* --- Layout --- */

.dashboard-container {
  display: flex;
  flex-direction: column;
  height: 100vh;
  width: 100vw;
}

.header {
  height: 60px;
  background: #0f172a;
  border-bottom: 1px solid #1e293b;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
  z-index: 500;
}

.header h1 {
  font-size: 1.5rem;
  font-weight: 800;
  color: #fff;
  margin: 0;
  letter-spacing: -0.5px;
}

.highlight {
  color: #38bdf8;
  background: -webkit-linear-gradient(45deg, #38bdf8, #818cf8);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.stats-bar {
  display: flex;
  gap: 20px;
  align-items: center;
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.stat-item .label {
  font-size: 0.7rem;
  text-transform: uppercase;
  color: #64748b;
  font-weight: 700;
}

.stat-item .value {
  font-size: 1.1rem;
  font-weight: 700;
  color: #f8fafc;
}

.stat-item.danger .value {
  color: #ef4444;
  text-shadow: 0 0 10px rgba(239, 68, 68, 0.4);
}

.sim-btn {
  background: #2563eb;
  color: #fff;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
  font-size: 0.8rem;
  letter-spacing: 0.5px;
}

.sim-btn.active {
  background: #ef4444;
  animation: pulse-red 2s infinite;
}

.content-grid {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.map-view {
  flex: 1;
  position: relative;
  background: #1e293b;
}

.side-panel {
  width: 400px;
  background: #0f172a;
  border-left: 1px solid #1e293b;
  display: flex;
  flex-direction: column;
  box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
  z-index: 400;
}

/* --- Feed --- */
.feed {
  padding: 20px;
  overflow-y: auto;
  flex: 1;
}

.feed h3 {
  margin-top: 0;
  font-size: 0.9rem;
  text-transform: uppercase;
  color: #94a3b8;
  border-bottom: 2px solid #1e293b;
  padding-bottom: 10px;
}

.feed-item {
  background: #1e293b;
  border: 1px solid #334155;
  border-radius: 6px;
  padding: 15px;
  margin-bottom: 15px;
  cursor: pointer;
  transition: transform 0.2s, background 0.2s;
}

.feed-item:hover {
  transform: translateX(-5px);
  background: #334155;
}

.feed-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
}

.badge.high {
  background: rgba(239, 68, 68, 0.2);
  color: #ef4444;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 0.7rem;
  font-weight: 700;
  border: 1px solid rgba(239, 68, 68, 0.4);
}

.time {
  font-size: 0.75rem;
  color: #64748b;
}

.pred-count {
  font-size: 0.8rem;
  color: #fbbf24;
  margin-top: 5px;
}

.empty-state {
  text-align: center;
  color: #475569;
  font-style: italic;
  margin-top: 40px;
}

/* --- Astra Panel --- */
.astra-panel {
  padding: 20px;
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #0b1120;
}

.astra-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  border-bottom: 1px solid #334155;
  padding-bottom: 15px;
}

.astra-header h2 {
  margin: 0;
  font-size: 1.1rem;
  color: #38bdf8;
  letter-spacing: 1px;
}

.close-btn {
  background: none;
  border: none;
  color: #64748b;
  font-size: 1.5rem;
  cursor: pointer;
}

.astra-body {
  flex: 1;
  overflow-y: auto;
}

.section {
  margin-bottom: 25px;
}

.level-bar {
  height: 8px;
  background: #334155;
  border-radius: 4px;
  overflow: hidden;
  margin-top: 8px;
}

.level-bar .fill.critical {
  background: #ef4444;
  height: 100%;
  text-align: right;
  font-size: 0.6rem;
  line-height: 8px;
  padding-right: 5px;
  color: #000;
  font-weight: bold;
}

.row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  font-size: 0.9rem;
  border-bottom: 1px solid #1e293b;
  padding-bottom: 5px;
}

.code {
  font-family: 'Courier New', monospace;
  color: #fff;
}

.warning {
  color: #fbbf24;
  font-weight: 700;
}

.predictions h3 {
  font-size: 0.8rem;
  color: #94a3b8;
  margin-bottom: 10px;
}

.prediction-item {
  background: #1e293b;
  border-left: 3px solid #fbbf24;
  padding: 10px;
  margin-bottom: 10px;
}

.p-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
}

.rank {
  font-weight: 700;
  color: #fbbf24;
}

.p-prob {
  font-size: 0.8rem;
  color: #fff;
}

.p-loc {
  font-size: 0.9rem;
  font-weight: 600;
  margin-bottom: 5px;
}

.p-meta {
  display: flex;
  justify-content: space-between;
  font-size: 0.75rem;
  color: #64748b;
}

.actions {
  display: grid;
  gap: 10px;
  margin-top: auto;
}

.action-btn {
  width: 100%;
  padding: 12px;
  border: none;
  border-radius: 4px;
  font-weight: 700;
  cursor: pointer;
  text-transform: uppercase;
  font-size: 0.85rem;
}

.action-btn.deploy {
  background: #38bdf8;
  color: #0f172a;
}

.action-btn.freeze {
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
  border: 1px solid #ef4444;
}

.action-btn:hover {
  opacity: 0.9;
}

/* --- Map Animations --- */

/* Pulse animation for predictions */
/* Using SVG stroke animation logic */
@keyframes dash {
  from {
    stroke-dashoffset: 20;
  }

  to {
    stroke-dashoffset: 0;
  }
}

.pulsing-marker path {
  /* Leaflet renders markers as SVG paths or div icons. 
     CircleMarker is SVG. We need to target the path. 
     However, standard CircleMarker options like dashArray are static.
     We might need JS to animate, OR use CSS on the class if Leaflet applies it to the path.
     Leaflet applies className to the <path> element for CircleMarker.
  */
  animation: svg-pulse 1.5s infinite alternate;
  transform-origin: center;
}

@keyframes svg-pulse {
  0% {
    stroke-opacity: 1;
    stroke-width: 2;
    fill-opacity: 0;
    transform: scale(1);
  }

  100% {
    stroke-opacity: 0.5;
    stroke-width: 10;
    fill-opacity: 0.2;
    transform: scale(1.1);
  }
}

/* Button pulse */
@keyframes pulse-red {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
  }

  70% {
    box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);
  }
}